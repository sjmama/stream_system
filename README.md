# stream_system
S_S
![image](https://github.com/sjmama/stream_system/assets/45173661/18cfa29e-fc1e-4753-b53f-e4586d06e863)

##RTMP
-----
라즈베리파이는 서버에 구성된 nginx-Rtmp 웹서버로 ffmpeg명령어를 통해 Rtmp프로토콜을 사용하여 영상 스트림을 push 한다.
서버에서는 opencv를 사용하여 스트림을 캡쳐한다

##Shared Memory
------
두개의 신경망과 메인 프로세스는 각각 다른 프로세스로 실행 되기에 프레임 정보를 공유하기 위해 공유메모리를 사용하였다.
각각의 프로세스를 시작하고 공유메모리의 주소값을 전달해 주기위하여 project.bash 쉘 스크립트를 구성하였다.
이는 각각의 프로세스를 시작하고 공유메모리 주소값을 각각의 프로세스에 전달한다.

##Queuing
------
이벤트가 발생하고서 영상을 저장하기 시작하면 전 상황을 알수 없기에
영상의 3초(변경가능)을 큐잉하여 이벤트가 발생하기 전 3초와 이벤트 발생중의 영상을 저장한다.
